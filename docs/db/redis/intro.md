---
nav:
  title: æ•°æ®åº“
  path: /db
group:
  title: ğŸ’Š redis
  order: 1
---

# ç¯å¢ƒæ­å»º

## ä¸‹è½½


[å®˜æ–¹ç½‘ç«™](https://redis.io/)


## å®‰è£…


```javascript
è§£å‹
tar zxvf redis-4.0.8.tar.gz
ç§»åŠ¨æ–‡ä»¶å¤¹
mv redis-4.0.8 /usr/local/
æ‰“å¼€è¯¥æ–‡ä»¶å¤¹
cd /usr/local/redis-4.0.8/
ç¼–è¯‘æµ‹è¯•
sudo make test
ç¼–è¯‘å®‰è£…
sudo make install
```


## å¯åŠ¨


```javascript
redis-server
```


## é…ç½®

### æ–°å»ºç›®å½•
```
sudo mkdir  redis-4.0.8/bin
sudo mkdir  redis-4.0.8/etc
sudo mkdir  redis-4.0.8/db
```

### æ‹·è´æ–‡ä»¶

```
cp src/mkreleasehdr.sh bin
cp src/redis-benchmark bin
cp src/redis-check-rdb bin
cp src/redis-cli bin
cp src/redis-server bin
```

## ä¿®æ”¹redis.conf


```t
#ä¿®æ”¹ä¸ºå®ˆæŠ¤æ¨¡å¼
daemonize yes
#è®¾ç½®è¿›ç¨‹é”æ–‡ä»¶
pidfile /usr/local/redis-3.2.8/redis.pid
#ç«¯å£
port 6379
#å®¢æˆ·ç«¯è¶…æ—¶æ—¶é—´
timeout 300
#æ—¥å¿—çº§åˆ«
loglevel debug
#æ—¥å¿—æ–‡ä»¶ä½ç½®
logfile /usr/local/redis-3.2.8/log-redis.log
#è®¾ç½®æ•°æ®åº“çš„æ•°é‡ï¼Œé»˜è®¤æ•°æ®åº“ä¸º0ï¼Œå¯ä»¥ä½¿ç”¨SELECT <dbid>å‘½ä»¤åœ¨è¿æ¥ä¸ŠæŒ‡å®šæ•°æ®åº“id
databases 16
##æŒ‡å®šåœ¨å¤šé•¿æ—¶é—´å†…ï¼Œæœ‰å¤šå°‘æ¬¡æ›´æ–°æ“ä½œï¼Œå°±å°†æ•°æ®åŒæ­¥åˆ°æ•°æ®æ–‡ä»¶ï¼Œå¯ä»¥å¤šä¸ªæ¡ä»¶é…åˆ
#save <seconds> <changes>
#Redisé»˜è®¤é…ç½®æ–‡ä»¶ä¸­æä¾›äº†ä¸‰ä¸ªæ¡ä»¶ï¼š
save 900 1
save 300 10
save 60 10000
#æŒ‡å®šå­˜å‚¨è‡³æœ¬åœ°æ•°æ®åº“æ—¶æ˜¯å¦å‹ç¼©æ•°æ®ï¼Œé»˜è®¤ä¸ºyesï¼ŒRedisé‡‡ç”¨LZFå‹ç¼©ï¼Œå¦‚æœä¸ºäº†èŠ‚çœCPUæ—¶é—´ï¼Œ
#å¯ä»¥å…³é—­è¯¥#é€‰é¡¹ï¼Œä½†ä¼šå¯¼è‡´æ•°æ®åº“æ–‡ä»¶å˜çš„å·¨å¤§
rdbcompression yes
#æŒ‡å®šæœ¬åœ°æ•°æ®åº“æ–‡ä»¶å
dbfilename dump.rdb
#æŒ‡å®šæœ¬åœ°æ•°æ®åº“è·¯å¾„
dir /usr/local/redis-3.2.8/db/
#æŒ‡å®šæ˜¯å¦åœ¨æ¯æ¬¡æ›´æ–°æ“ä½œåè¿›è¡Œæ—¥å¿—è®°å½•ï¼ŒRedisåœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯å¼‚æ­¥çš„æŠŠæ•°æ®å†™å…¥ç£ç›˜ï¼Œå¦‚æœä¸å¼€å¯ï¼Œå¯èƒ½
#ä¼šåœ¨æ–­ç”µæ—¶å¯¼è‡´ä¸€æ®µæ—¶é—´å†…çš„æ•°æ®ä¸¢å¤±ã€‚å› ä¸º redisæœ¬èº«åŒæ­¥æ•°æ®æ–‡ä»¶æ˜¯æŒ‰ä¸Šé¢saveæ¡ä»¶æ¥åŒæ­¥çš„ï¼Œæ‰€ä»¥æœ‰
#çš„æ•°æ®ä¼šåœ¨ä¸€æ®µæ—¶é—´å†…åªå­˜åœ¨äºå†…å­˜ä¸­
appendonly no
#æŒ‡å®šæ›´æ–°æ—¥å¿—æ¡ä»¶ï¼Œå…±æœ‰3ä¸ªå¯é€‰å€¼ï¼š
#noï¼šè¡¨ç¤ºç­‰æ“ä½œç³»ç»Ÿè¿›è¡Œæ•°æ®ç¼“å­˜åŒæ­¥åˆ°ç£ç›˜ï¼ˆå¿«ï¼‰
#alwaysï¼šè¡¨ç¤ºæ¯æ¬¡æ›´æ–°æ“ä½œåæ‰‹åŠ¨è°ƒç”¨fsync()å°†æ•°æ®å†™åˆ°ç£ç›˜ï¼ˆæ…¢ï¼Œå®‰å…¨ï¼‰
#everysecï¼šè¡¨ç¤ºæ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼ˆæŠ˜è¡·ï¼Œé»˜è®¤å€¼ï¼‰
appendfsync everysec
```


## å¯åŠ¨æœåŠ¡


### å¯åŠ¨
> ./bin/redis-server etc/redis.conf

### æŸ¥çœ‹æ—¥å¿—
> tail -f log-redis.log

### OK
> ./bin/redis-cli

## åŸºæœ¬å‘½ä»¤


### æŸ¥çœ‹æ‰€æœ‰æ•°æ®
> keys *

### æ’å…¥é”®å€¼å¯¹
> set a b

### æŸ¥çœ‹æ•°æ®
> get a

