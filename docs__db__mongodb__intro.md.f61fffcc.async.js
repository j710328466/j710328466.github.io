(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{Loea:function(e,a,n){"use strict";n.r(a);var t=n("xwgP"),o=n.n(t),c=n("OS9G"),r=n("W+6v");n("Rsk4");a["default"]=e=>(o.a.useEffect((()=>{var a;null!==e&&void 0!==e&&null!==(a=e.location)&&void 0!==a&&a.hash&&c["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"markdown"},o.a.createElement("h1",{id:"-mongodb"},o.a.createElement(c["AnchorLink"],{to:"#-mongodb","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\ud83d\udc8a mongoDB"),o.a.createElement("h2",{id:"mac-\u5b89\u88c5"},o.a.createElement(c["AnchorLink"],{to:"#mac-\u5b89\u88c5","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"mac \u5b89\u88c5"),o.a.createElement("h3",{id:"11-\u5230\u5b98\u7f51\u4e0b\u8f7d\u6307\u5b9a\u7248\u672c\u7684\u5b89\u88c5\u5305"},o.a.createElement(c["AnchorLink"],{to:"#11-\u5230\u5b98\u7f51\u4e0b\u8f7d\u6307\u5b9a\u7248\u672c\u7684\u5b89\u88c5\u5305","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"1.1 \u5230\u5b98\u7f51\u4e0b\u8f7d\u6307\u5b9a\u7248\u672c\u7684\u5b89\u88c5\u5305"),o.a.createElement("p",null,o.a.createElement(c["Link"],{to:"https://www.mongodb.com/try/download/community?jmp=nav"},"https://www.mongodb.com/try/download/community?jmp=nav")),o.a.createElement("h3",{id:"12-\u5c06\u5b89\u88c5\u5305\u653e\u5230\u6307\u5b9a\u6587\u4ef6\u5939"},o.a.createElement(c["AnchorLink"],{to:"#12-\u5c06\u5b89\u88c5\u5305\u653e\u5230\u6307\u5b9a\u6587\u4ef6\u5939","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"1.2 \u5c06\u5b89\u88c5\u5305\u653e\u5230\u6307\u5b9a\u6587\u4ef6\u5939"),o.a.createElement(r["a"],{code:"open /usr/local",lang:"javascript"}),o.a.createElement("h3",{id:""},o.a.createElement(c["AnchorLink"],{to:"#","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"}))),o.a.createElement("h3",{id:"13-\u914d\u7f6e\u6570\u636e\u5e93data\u76ee\u5f55"},o.a.createElement(c["AnchorLink"],{to:"#13-\u914d\u7f6e\u6570\u636e\u5e93data\u76ee\u5f55","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"1.3 \u914d\u7f6e\u6570\u636e\u5e93data\u76ee\u5f55"),o.a.createElement(r["a"],{code:"sudo mkdir -p /data/db",lang:"javascript"}),o.a.createElement("h2",{id:"-1"},o.a.createElement(c["AnchorLink"],{to:"#-1","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"}))),o.a.createElement("h3",{id:"14-\u914d\u7f6e\u73af\u5883\u53d8\u91cf"},o.a.createElement(c["AnchorLink"],{to:"#14-\u914d\u7f6e\u73af\u5883\u53d8\u91cf","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"1.4 \u914d\u7f6e\u73af\u5883\u53d8\u91cf"),o.a.createElement(r["a"],{code:"# 1. \u6253\u5f00 bash \u6587\u4ef6\nopen ~/.bash_profile\n\n# 2. \u5728 bash \u4e2d\u5199\u5165\nPATH=$PATH:/usr/local/mongoDB/bin\n\n# 3. \u4fdd\u5b58 bash\uff0c\u5e76\u89e6\u53d1\u751f\u6548\nsource ~/.bash_profile",lang:"javascript"}),o.a.createElement("h2",{id:"-2"},o.a.createElement(c["AnchorLink"],{to:"#-2","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"}))),o.a.createElement("h3",{id:"15-\u542f\u52a8-mongodb"},o.a.createElement(c["AnchorLink"],{to:"#15-\u542f\u52a8-mongodb","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"1.5 \u542f\u52a8 mongodb"),o.a.createElement(r["a"],{code:"mongod --dbpath /usr/local/mongodb/db\n\nmongod --dbpath /usr/local/mongodb/db  -f /etc/mongod.conf",lang:"javascript"}),o.a.createElement("h2",{id:"centos\u5b89\u88c5"},o.a.createElement(c["AnchorLink"],{to:"#centos\u5b89\u88c5","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"centOS\u5b89\u88c5"),o.a.createElement("h3",{id:"21-\u6dfb\u52a0\u6e90"},o.a.createElement(c["AnchorLink"],{to:"#21-\u6dfb\u52a0\u6e90","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"2.1 \u6dfb\u52a0\u6e90"),o.a.createElement(r["a"],{code:"- sudo vi /etc/yum.repos.d/mongodb-org-4.0.repo",lang:"unknown"}),o.a.createElement("h3",{id:"22-\u6dfb\u52a0\u914d\u7f6e\u4fe1\u606f"},o.a.createElement(c["AnchorLink"],{to:"#22-\u6dfb\u52a0\u914d\u7f6e\u4fe1\u606f","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"2.2 \u6dfb\u52a0\u914d\u7f6e\u4fe1\u606f"),o.a.createElement(r["a"],{code:"- [mongodb-org-4.0]\n  - name=MongoDB Repository\n  - baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.0/x86_64/\n  - gpgcheck=1\n  - enabled=1\n  - gpgkey=https://www.mongodb.org/static/pgp/server-4.0.asc",lang:"unknown"}),o.a.createElement("h3",{id:"23-\u5b89\u88c5"},o.a.createElement(c["AnchorLink"],{to:"#23-\u5b89\u88c5","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"2.3 \u5b89\u88c5"),o.a.createElement(r["a"],{code:"- sudo yum install -y mongodb-org",lang:"unknown"}),o.a.createElement("h3",{id:"24-\u68c0\u9a8c"},o.a.createElement(c["AnchorLink"],{to:"#24-\u68c0\u9a8c","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"2.4 \u68c0\u9a8c"),o.a.createElement(r["a"],{code:"- rpm -qa |grep mongodb\n  - rpm -ql mongodb-org-server",lang:"unknown"}),o.a.createElement("h3",{id:"24-\u542f\u52a8\u670d\u52a1"},o.a.createElement(c["AnchorLink"],{to:"#24-\u542f\u52a8\u670d\u52a1","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"2.4 \u542f\u52a8\u670d\u52a1"),o.a.createElement(r["a"],{code:"- \u5efa\u8bae\u52a0\u4e0a --auth \u6743\u9650\u9a8c\u8bc1\n  - service mongod start\n  - systemctl start mongod.service",lang:"unknown"}),o.a.createElement("blockquote",null,o.a.createElement("p",null,"\u901a\u8fc7\u672c\u5730\u6587\u4ef6\u542f\u52a8\uff1amongod -f /usr/local/mongodb/mongodb.conf")),o.a.createElement("h3",{id:"25-\u67e5\u770b\u7aef\u53e3"},o.a.createElement(c["AnchorLink"],{to:"#25-\u67e5\u770b\u7aef\u53e3","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"2.5 \u67e5\u770b\u7aef\u53e3"),o.a.createElement(r["a"],{code:"- netstat -natp | grep 27017",lang:"unknown"}),o.a.createElement("h3",{id:"26-\u67e5\u770b\u662f\u5426\u6210\u529f"},o.a.createElement(c["AnchorLink"],{to:"#26-\u67e5\u770b\u662f\u5426\u6210\u529f","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"2.6 \u67e5\u770b\u662f\u5426\u6210\u529f"),o.a.createElement(r["a"],{code:"- ps -aux | grep mongod # \u67e5\u770b\u6570\u636e\u5e93\u7684\u8fdb\u7a0b\u662f\u5426\u5b58\u5728",lang:"unknown"}),o.a.createElement("h3",{id:"27-\u5f00\u673a\u81ea\u542f"},o.a.createElement(c["AnchorLink"],{to:"#27-\u5f00\u673a\u81ea\u542f","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"2.7 \u5f00\u673a\u81ea\u542f"),o.a.createElement(r["a"],{code:"- chkconfig mongod on\n  - systemctl enable mongod.service",lang:"unknown"}),o.a.createElement("h3",{id:"28-\u5173\u95ed"},o.a.createElement(c["AnchorLink"],{to:"#28-\u5173\u95ed","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"2.8 \u5173\u95ed"),o.a.createElement(r["a"],{code:"pkill mongod",lang:"javascript"}),o.a.createElement("h2",{id:"\u76ee\u5f55\u4ecb\u7ecd"},o.a.createElement(c["AnchorLink"],{to:"#\u76ee\u5f55\u4ecb\u7ecd","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u76ee\u5f55\u4ecb\u7ecd"),o.a.createElement("h3",{id:"\u914d\u7f6e\u6587\u4ef6\uff1a"},o.a.createElement(c["AnchorLink"],{to:"#\u914d\u7f6e\u6587\u4ef6\uff1a","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u914d\u7f6e\u6587\u4ef6\uff1a"),o.a.createElement("p",null,"/etc/mongod.conf"),o.a.createElement(r["a"],{code:"port=27017 #\u7aef\u53e3\ndbpath=/usr/local/mongodb/db #\u6570\u636e\u5e93\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\nlogpath=/usr/local/mongodb/logs/mongodb.log #\u65e5\u5fd7\u6587\u4ef6\u5b58\u653e\u8def\u5f84\nlogappend=true #\u4f7f\u7528\u8ffd\u52a0\u7684\u65b9\u5f0f\u5199\u65e5\u5fd7\nfork=true #\u4ee5\u5b88\u62a4\u8fdb\u7a0b\u7684\u65b9\u5f0f\uff0c\u521b\u5efa\u670d\u52a1\u5668\u8fdb\u7a0b\nmaxConns=100 #\u6700\u5927\u540c\u65f6\u8fde\u63a5\u6570\njournal=true #\u6bcf\u6b21\u5199\u5165\u4f1a\u8bb0\u5f55\u4e00\u6761\u64cd\u4f5c\u65e5\u5fd7\nbind_ip=0.0.0.0 #\u53ef\u5916\u90e8\u8bbf\u95ee\nauth=true #\u7528\u6237\u8ba4\u8bc1",lang:"json"}),o.a.createElement("h3",{id:"-3"},o.a.createElement(c["AnchorLink"],{to:"#-3","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"}))),o.a.createElement("h3",{id:"\u6570\u636e\u5e93\u4fdd\u5b58\u76ee\u5f55\uff1a"},o.a.createElement(c["AnchorLink"],{to:"#\u6570\u636e\u5e93\u4fdd\u5b58\u76ee\u5f55\uff1a","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u6570\u636e\u5e93\u4fdd\u5b58\u76ee\u5f55\uff1a"),o.a.createElement(r["a"],{code:"- /usr/local/mongodb/db",lang:"unknown"}),o.a.createElement("h3",{id:"\u65e5\u5fd7\u76ee\u5f55\uff1a"},o.a.createElement(c["AnchorLink"],{to:"#\u65e5\u5fd7\u76ee\u5f55\uff1a","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u65e5\u5fd7\u76ee\u5f55\uff1a"),o.a.createElement(r["a"],{code:"- /usr/local/mongodb/logs/mongodb.log",lang:"unknown"}),o.a.createElement("blockquote",null,o.a.createElement("p",null,"\u5982\u679c\u9700\u8981\u4fee\u6539\u6570\u636e\u76ee\u5f55\u548c\u65e5\u5fd7\u76ee\u5f55\uff0c\u53ea\u9700\u4fee\u6539 /etc/mongod.conf \u4e2d\u7684 storage.dbPath \u548c systemLog.path \u5373\u53ef\u3002")),o.a.createElement("h2",{id:"-4"},o.a.createElement(c["AnchorLink"],{to:"#-4","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"}))),o.a.createElement("h2",{id:"\u5378\u8f7d"},o.a.createElement(c["AnchorLink"],{to:"#\u5378\u8f7d","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u5378\u8f7d"),o.a.createElement("h3",{id:"41-\u5173\u95ed\u670d\u52a1"},o.a.createElement(c["AnchorLink"],{to:"#41-\u5173\u95ed\u670d\u52a1","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"4.1 \u5173\u95ed\u670d\u52a1"),o.a.createElement(r["a"],{code:"service mongod stop\n\nor\n\nsystemctl stop mongod.service",lang:"json"}),o.a.createElement("h3",{id:"42-\u5220\u9664\u76f8\u5173\u7684\u5305"},o.a.createElement(c["AnchorLink"],{to:"#42-\u5220\u9664\u76f8\u5173\u7684\u5305","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"4.2 \u5220\u9664\u76f8\u5173\u7684\u5305"),o.a.createElement(r["a"],{code:"yum erase $(rpm -qa | grep mongodb-org)",lang:"json"}),o.a.createElement("h3",{id:"43-\u5220\u9664\u76ee\u5f55\u548c\u6587\u4ef6"},o.a.createElement(c["AnchorLink"],{to:"#43-\u5220\u9664\u76ee\u5f55\u548c\u6587\u4ef6","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"4.3 \u5220\u9664\u76ee\u5f55\u548c\u6587\u4ef6"),o.a.createElement(r["a"],{code:"rm -r /var/log/mongodbrm -r /var/lib/mongo",lang:"json"}),o.a.createElement("h3",{id:"44-\u5f7b\u5e95\u5378\u8f7d"},o.a.createElement(c["AnchorLink"],{to:"#44-\u5f7b\u5e95\u5378\u8f7d","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"4.4 \u5f7b\u5e95\u5378\u8f7d"),o.a.createElement(r["a"],{code:"sudo yum erase $(rpm -qa | grep mongodb-org) # \u5378\u8f7d\nMongoDB sudo rm -r /var/log/mongodb # \u5220\u9664\u65e5\u5fd7\u6587\u4ef6\nsudo rm -r /var/lib/mongo # \u5220\u9664\u6570\u636e\u6587\u4ef6",lang:"json"}),o.a.createElement("h2",{id:"\u5e38\u89c1\u547d\u4ee4"},o.a.createElement(c["AnchorLink"],{to:"#\u5e38\u89c1\u547d\u4ee4","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u5e38\u89c1\u547d\u4ee4"),o.a.createElement("h3",{id:"\u767b\u5f55"},o.a.createElement(c["AnchorLink"],{to:"#\u767b\u5f55","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u767b\u5f55"),o.a.createElement(r["a"],{code:"\u2022 mongo '\u6570\u636e\u5e93\u540d' -u '\u7528\u6237\u540d' -p '\u5bc6\u7801'",lang:"javascript"}),o.a.createElement("h3",{id:"\u91cd\u542f"},o.a.createElement(c["AnchorLink"],{to:"#\u91cd\u542f","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u91cd\u542f"),o.a.createElement(r["a"],{code:"sudo service mongod restart",lang:"javascript"}),o.a.createElement("h3",{id:"\u67e5\u770b\u65e5\u5fd7"},o.a.createElement(c["AnchorLink"],{to:"#\u67e5\u770b\u65e5\u5fd7","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u67e5\u770b\u65e5\u5fd7"),o.a.createElement(r["a"],{code:"/var/log/mongo/mongod.log",lang:"javascript"}),o.a.createElement("h3",{id:"\u547d\u4ee4\u884c\u6253\u5f00"},o.a.createElement(c["AnchorLink"],{to:"#\u547d\u4ee4\u884c\u6253\u5f00","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u547d\u4ee4\u884c\u6253\u5f00"),o.a.createElement(r["a"],{code:"\u2022 sudo mongod --port 27017 --dbpath /data/db --bind_ip 0.0.0.0 --auth -f /etc/mongod.conf",lang:"javascript"}),o.a.createElement("h3",{id:"-5"},o.a.createElement(c["AnchorLink"],{to:"#-5","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"}))),o.a.createElement("h3",{id:"\u7528\u6237\u6743\u9650"},o.a.createElement(c["AnchorLink"],{to:"#\u7528\u6237\u6743\u9650","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u7528\u6237\u6743\u9650"),o.a.createElement("h4",{id:"\u6743\u9650\u5217\u8868"},o.a.createElement(c["AnchorLink"],{to:"#\u6743\u9650\u5217\u8868","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u6743\u9650\u5217\u8868"),o.a.createElement("ul",null,o.a.createElement("li",null,".1. \u6570\u636e\u5e93\u7528\u6237\u89d2\u8272\uff1aread\u3001readWrite;"),o.a.createElement("li",null,".2. \u6570\u636e\u5e93\u7ba1\u7406\u89d2\u8272\uff1adbAdmin\u3001dbOwner\u3001userAdmin\uff1b"),o.a.createElement("li",null,".3.\xa0\u96c6\u7fa4\u7ba1\u7406\u89d2\u8272\uff1aclusterAdmin\u3001clusterManager\u3001clusterMonitor\u3001hostManager\uff1b"),o.a.createElement("li",null,".4.\xa0\u5907\u4efd\u6062\u590d\u89d2\u8272\uff1abackup\u3001restore\uff1b"),o.a.createElement("li",null,".5.\xa0\u6240\u6709\u6570\u636e\u5e93\u89d2\u8272\uff1areadAnyDatabase\u3001readWriteAnyDatabase\u3001userAdminAnyDatabase\u3001dbAdminAnyDatabase"),o.a.createElement("li",null,".6.\xa0\u8d85\u7ea7\u7528\u6237\u89d2\u8272\uff1aroot"),o.a.createElement("li",null,"//\xa0\u8fd9\u91cc\u8fd8\u6709\u51e0\u4e2a\u89d2\u8272\u95f4\u63a5\u6216\u76f4\u63a5\u63d0\u4f9b\u4e86\u7cfb\u7edf\u8d85\u7ea7\u7528\u6237\u7684\u8bbf\u95ee\uff08dbOwner\xa0\u3001userAdmin\u3001userAdminAnyDatabase\uff09"),o.a.createElement("li",null,".7.\xa0\u5185\u90e8\u89d2\u8272\uff1a__system")),o.a.createElement("h4",{id:"\u65b0\u589e\u7528\u6237"},o.a.createElement(c["AnchorLink"],{to:"#\u65b0\u589e\u7528\u6237","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u65b0\u589e\u7528\u6237"),o.a.createElement(r["a"],{code:'// \u5207\u6362\u6839\u6570\u636e\u5e93\nuse admin\n// \u521b\u5efa\u7528\u6237\ndb.createUser({user:"h5creator",pwd:"123456mjw",roles:[{role:"dbAdmin",db:"test"}]})\n// \u767b\u5f55\u7528\u6237\ndb.auth(${name}, ${pwd})',lang:"javascript"}),o.a.createElement("h3",{id:"-6"},o.a.createElement(c["AnchorLink"],{to:"#-6","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"}))),o.a.createElement("h4",{id:"\u4fee\u6539\u7528\u6237\u6743\u9650"},o.a.createElement(c["AnchorLink"],{to:"#\u4fee\u6539\u7528\u6237\u6743\u9650","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u4fee\u6539\u7528\u6237\u6743\u9650"),o.a.createElement(r["a"],{code:'db.grantRolesToUser("h5creator",[{role:"readWrite", db:"test"}])',lang:"javascript"}),o.a.createElement("h4",{id:"\u66f4\u65b0\u5b57\u6bb5"},o.a.createElement(c["AnchorLink"],{to:"#\u66f4\u65b0\u5b57\u6bb5","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u66f4\u65b0\u5b57\u6bb5"),o.a.createElement(r["a"],{code:'db.collection.update(\n   <query>,\n   <update>,\n   {\n     upsert: <boolean>,\t// \u5982\u679c\u4e0d\u5b58\u5728update\u7684\u8bb0\u5f55\uff0c\u662f\u5426\u63d2\u5165objNew,true\u4e3a\u63d2\u5165\uff0c\u9ed8\u8ba4\u662ffalse\uff0c\u4e0d\u63d2\u5165\u3002\n     multi: <boolean>,\t// \u9ed8\u8ba4\u662ffalse,\u53ea\u66f4\u65b0\u627e\u5230\u7684\u7b2c\u4e00\u6761\u8bb0\u5f55\uff0c\u5982\u679c\u8fd9\u4e2a\u53c2\u6570\u4e3atrue,\u5c31\u628a\u6309\u6761\u4ef6\u67e5\u51fa\u6765\u591a\u6761\u8bb0\u5f55\u5168\u90e8\u66f4\u65b0\n     writeConcern: <document> // \u629b\u51fa\u5f02\u5e38\u7684\u7ea7\u522b\n   }\n)\n\n// \u5220\u9664\u4e00\u4e2a key \u5b57\u6bb5\ndb.collection.update({},{"$unset":{"key":""}},{multi:true})\n\n// \u65b0\u589e\u4e00\u4e2a type \u5b57\u6bb5\ndb.getCollection(\'article\').update({}, {$set: {type:NumberInt(\'1\')}}, {multi: true})',lang:"javascript"}),o.a.createElement("h3",{id:"\u5f00\u53d1\u5bf9\u5916\u7aef\u53e3"},o.a.createElement(c["AnchorLink"],{to:"#\u5f00\u53d1\u5bf9\u5916\u7aef\u53e3","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u5f00\u53d1\u5bf9\u5916\u7aef\u53e3"),o.a.createElement("h4",{id:"\u65b9\u6848\u4e00"},o.a.createElement(c["AnchorLink"],{to:"#\u65b9\u6848\u4e00","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u65b9\u6848\u4e00"),o.a.createElement(r["a"],{code:"\u2022 systemctl status firewalld # \u67e5\u770b\u9632\u706b\u5899\u72b6\u6001\n\u2022 firewall-cmd --zone=public --add-port=27017/tcp --permanent # mongodb\u9ed8\u8ba4\u7aef\u53e3\u53f7\n\u2022 firewall-cmd --reload # \u91cd\u65b0\u52a0\u8f7d\u9632\u706b\u5899\n\u2022 firewall-cmd --zone=public --query-port=27017/tcp # \u67e5\u770b\u7aef\u53e3\u53f7\u662f\u5426\u5f00\u653e\u6210\u529f\uff0c\u8f93\u51fayes\u5f00\u653e\u6210\u529f\uff0cno\u5219\u5931\u8d25",lang:"javascript"}),o.a.createElement("h4",{id:"\u65b9\u6848\u4e8c"},o.a.createElement(c["AnchorLink"],{to:"#\u65b9\u6848\u4e8c","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u65b9\u6848\u4e8c"),o.a.createElement(r["a"],{code:"\u2022 iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 27017 -j ACCEPT",lang:"javascript"}),o.a.createElement("h2",{id:"\u5076\u9047\u95ee\u9898"},o.a.createElement(c["AnchorLink"],{to:"#\u5076\u9047\u95ee\u9898","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"\u5076\u9047\u95ee\u9898"),o.a.createElement("h3",{id:"1-failed-to-unlink-socket-file-tmpmongodb-27017sock-operation-not-permitted"},o.a.createElement(c["AnchorLink"],{to:"#1-failed-to-unlink-socket-file-tmpmongodb-27017sock-operation-not-permitted","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"1) Failed to unlink socket file /tmp/mongodb-27017.sock Operation not permitted"),o.a.createElement(r["a"],{code:"- \u89e3\u51b3\u65b9\u6848\uff1a\u5220\u9664\u8be5\u6587\u4ef6",lang:"unknown"}),o.a.createElement("h3",{id:"2-unable-to-lock-file-varlibmongomongodlock"},o.a.createElement(c["AnchorLink"],{to:"#2-unable-to-lock-file-varlibmongomongodlock","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"2) Unable to lock file: /var/lib/mongo/mongod.lock"),o.a.createElement(r["a"],{code:"- \u89e3\u51b3\u65b9\u6848\uff1a\u6e05\u7a7a\u8be5\u6587\u4ef6\u5185\u5bb9",lang:"unknown"}),o.a.createElement("h3",{id:"3-\u65e0\u6cd5\u6301\u7eed\u8fd0\u884c\u5728\u540e\u53f0"},o.a.createElement(c["AnchorLink"],{to:"#3-\u65e0\u6cd5\u6301\u7eed\u8fd0\u884c\u5728\u540e\u53f0","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"3) \u65e0\u6cd5\u6301\u7eed\u8fd0\u884c\u5728\u540e\u53f0"),o.a.createElement(r["a"],{code:"- \u89e3\u51b3\u65b9\u6848\uff1amongod --fork --dbpath=/usr/local/mongodb/data --logpath=/usr/local/mongodb/logs/mongodb2.log --logappend",lang:"unknown"}),o.a.createElement("ol",{start:4},o.a.createElement("li",null,"\u65e0\u6cd5\u542f\u52a8 mongodb")),o.a.createElement("blockquote",null,o.a.createElement("ol",null,o.a.createElement("li",null,"\u8fdb\u5165 mongod \u4e0a\u4e00\u6b21\u542f\u52a8\u7684\u65f6\u5019\u6307\u5b9a\u7684 data \u76ee\u5f55 --dbpath=/data/mongodb"))),o.a.createElement("p",null,"\u5220\u9664\u6389\u8be5\u6587\u4ef6:"),o.a.createElement("blockquote",null,o.a.createElement("p",null,"rm /data/db/mongo.lock 2. \u4fee\u590d")),o.a.createElement("p",null,"./mongod --repair"))))}}]);