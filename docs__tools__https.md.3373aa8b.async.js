(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[61],{"L/Lj":function(e,n,t){"use strict";t.r(n);var a=t("xwgP"),r=t.n(a),l=t("IqgK"),c=t("INx8"),i=r.a.memo((e=>{e.demos;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"markdown"},r.a.createElement("h1",{id:"-\u914d\u7f6ehttps"},r.a.createElement(l["AnchorLink"],{to:"#-\u914d\u7f6ehttps","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\ud83d\udc8a \u914d\u7f6ehttps"),r.a.createElement("h2",{id:"\u914d\u7f6e\u6d41\u7a0b"},r.a.createElement(l["AnchorLink"],{to:"#\u914d\u7f6e\u6d41\u7a0b","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"\u914d\u7f6e\u6d41\u7a0b"),r.a.createElement("p",null,"\u672c\u65b9\u6cd5\u914d\u7f6ehttps\u7528\u7684\u662fLet\u2019s Encrypt \uff0c\u7cfb\u7edf\u4e3acentOS"),r.a.createElement("h3",{id:"1-\u9632\u706b\u5899\u6253\u5f0080\u548c443\u7aef\u53e3"},r.a.createElement(l["AnchorLink"],{to:"#1-\u9632\u706b\u5899\u6253\u5f0080\u548c443\u7aef\u53e3","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"1. \u9632\u706b\u5899\u6253\u5f0080\u548c443\u7aef\u53e3"),r.a.createElement(c["a"],{code:"firewall-cmd --permanent --add-port=80/tcp\nfirewall-cmd --permanent --add-port=443/tcp\nfirewall-cmd --reload",lang:"js"}),r.a.createElement("h3",{id:"2-\u5b89\u88c5-certbot-\u5de5\u5177"},r.a.createElement(l["AnchorLink"],{to:"#2-\u5b89\u88c5-certbot-\u5de5\u5177","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"2. \u5b89\u88c5 certbot \u5de5\u5177"),r.a.createElement(c["a"],{code:"yum install -y epel-release\nyum install -y certbot",lang:"js"}),r.a.createElement("h3",{id:"3-\u7533\u8bf7\u8bc1\u4e66"},r.a.createElement(l["AnchorLink"],{to:"#3-\u7533\u8bf7\u8bc1\u4e66","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"3. \u7533\u8bf7\u8bc1\u4e66"),r.a.createElement("p",null,"\u7533\u8bf7\u6210\u529f\u540e\uff0c\u8bc1\u4e66\u4f1a\u4fdd\u5b58\u5728 /etc/letsencrypt/live/j710328466.github.io/ \u4e0b\u9762\uff1a"),r.a.createElement(c["a"],{code:"certbot certonly --webroot -w [Web\u7ad9\u70b9\u76ee\u5f55] -d [\u7ad9\u70b9\u57df\u540d] -m [\u8054\u7cfb\u4ebaemail\u5730\u5740] --agree-tos",lang:"js"}),r.a.createElement("blockquote",null,r.a.createElement("p",null,"e.g: certbot certonly --webroot -w /usr/local/nginx/html -d j710328466.github.io -m ",r.a.createElement(l["Link"],{to:"mailto:jzx710328466@gmail.com"},"jzx710328466@gmail.com")," --agree-tos")),r.a.createElement("h3",{id:"4-\u521b\u5efa\u81ea\u52a8\u66f4\u65b0\u8bc1\u4e66\u811a\u672c"},r.a.createElement(l["AnchorLink"],{to:"#4-\u521b\u5efa\u81ea\u52a8\u66f4\u65b0\u8bc1\u4e66\u811a\u672c","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"4. \u521b\u5efa\u81ea\u52a8\u66f4\u65b0\u8bc1\u4e66\u811a\u672c"),r.a.createElement("p",null,"\u56e0\u4e3aLet's Encrypt \u7684\u8bc1\u4e66\u6709\u6548\u65f6\u957f\u662f90\u5929\uff0c\u5982\u679c\u60f3\u8981\u7701\u53bb\u624b\u52a8\u53bb\u66f4\u65b0\u811a\u672c\u7684\u64cd\u4f5c\uff0c\u90a3\u8fd9\u4e2a\u65f6\u5019\u5c31\u9700\u8981\u7ed9\u4e2a\u811a\u672c\u6765\u5b9e\u73b0\u81ea\u52a8\u5316"),r.a.createElement(c["a"],{code:"//\u66f4\u65b0\u8bc1\u4e66\ncertbot renew --dry-run\n\xa0\n//\u5982\u679c\u4e0d\u9700\u8981\u8fd4\u56de\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528\u9759\u9ed8\u65b9\u5f0f\ncertbot renew --quiet\n\n// \u7f16\u8f91\u5f00\u59cb\u5199\u5165\u81ea\u52a8\u5316\u811a\u672c\ncrontab -e\n\n// \u628a\u8fd9\u6bb5\u5199\u5165\u811a\u672c\u7684\u6700\u540e\u4e00\u884c\uff0c\u610f\u601d\u662f\u6bcf\u6708\u7684\u4e00\u53f7 5\u70b9\u4f1a\u81ea\u52a8\u66f4\u65b0\u7b7e\u540d\u5e76\u4e14\u91cd\u65b0\u542f\u52a8nginx\n00 05 01 * * /usr/bin/certbot renew --quiet && /bin/systemctl restart nginx",lang:"js"}),r.a.createElement("h3",{id:"5-\u914d\u7f6enginx"},r.a.createElement(l["AnchorLink"],{to:"#5-\u914d\u7f6enginx","aria-hidden":"true",tabIndex:-1},r.a.createElement("span",{className:"icon icon-link"})),"5. \u914d\u7f6enginx"),r.a.createElement("ol",null,r.a.createElement("li",null,"\u4fee\u6539\u9ed8\u8ba4\u7684server")),r.a.createElement(c["a"],{code:"server {\n  listen       80;\n  server_name  j710328466.github.io;\n  rewrite ^ https://$server_name$request_uri? permanent;\n}",lang:"js"}),r.a.createElement("ol",{start:2},r.a.createElement("li",null,"\u4fee\u6539 https \u7684 server")),r.a.createElement(c["a"],{code:"# HTTPS server\n#\nserver {\n    listen       443 ssl;\n    server_name  j710328466.github.io;\n\n    ssl_certificate      /etc/letsencrypt/live/j710328466.github.io/fullchain.pem;\n    ssl_certificate_key  /etc/letsencrypt/live/j710328466.github.io/privkey.pem;\n\n    ssl_session_cache    shared:SSL:1m;\n    ssl_session_timeout  5m;\n\n    ssl_dhparam /etc/ssl/private/dhparam.pem;\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n\n    ssl_ciphers  'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128:AES256:AES:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK';\n    ssl_prefer_server_ciphers  on;\n\n    location / {\n        root   html;\n        index  index.html index.htm;\n    }\n}",lang:"js"})))}));n["default"]=e=>{var n=r.a.useContext(l["context"]),t=n.demos;return r.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&l["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),r.a.createElement(i,{demos:t})}}}]);